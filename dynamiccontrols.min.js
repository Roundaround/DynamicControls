(function(n){function s(t){var r,i;if(!n.isArray(t))return!1;for(r=!0,i=0;i<t.length;i++)if(!n.isArray(t[i]))return!1;return!0}function e(t,i){for(var f,u=0,e=t.length,r=0;r<e;r++)u=Math.max(t[r].length,u);for(r=0;r<e;r++)if(n.isArray(t[r])){if(t[r].length!=u)for(f=t[r].length;f<u;f++)t[r].push(i)}else t[r]=[].repeat(i,u);return t}function f(t,i){var u,r;if(n.isArray(t)){for(r=0;r<t.length;r++)if(typeof t[r]!="number"||t[r]%1!=0)return null}else{if(typeof t!="number"||t%1!=0)return null;u=t;t=[];t[0]=u}if((typeof i=="undefined"||i===null)&&(i=[]),!n.isArray(i)||arguments.length>2)for(u=i,i=[],i[0]=u,r=2;r<arguments.length;r++)i[r-1]=arguments[r];this.keys=t;this.modifiers=i}function t(t,i){return(t instanceof n.Event)?(i instanceof f)?n.inArray(t.keyCode,i.keys)===-1?!1:n.inArray(r.Modifiers.CTRL,i.modifiers)!=-1==!t.ctrlKey?!1:n.inArray(r.Modifiers.SHIFT,i.modifiers)!=-1==!t.shiftKey?!1:n.inArray(r.Modifiers.ALT,i.modifiers)!=-1==!t.altKey?!1:!0:!1:!1}var r,o,u;typeof Array.prototype.repeat!="function"&&(Array.prototype.repeat=function(n,t){while(t)this[t--]=n;return this});typeof String.prototype.startsWith!="function"&&(String.prototype.startsWith=function(n){return this.slice(0,n.length)==n});n.fn.setCursorPosition=function(t){return n(this).length===0?this:n(this).setSelection(t,t)};n.fn.setSelection=function(t,i){if(n(this).length==0)return this;if(input=n(this)[0],input.createTextRange){var r=input.createTextRange();r.collapse(!0);r.moveEnd("character",i);r.moveStart("character",t);r.select()}else input.setSelectionRange&&(input.focus(),input.setSelectionRange(t,i));return this};n.fn.focusEnd=function(){return n(this).setCursorPosition(n(this).val().length),this},function(t){n.fn.clone=function(){for(var r=t.apply(n(this),arguments),f=n(this).find("textarea").add(n(this).filter("textarea")),o=r.find("textarea").add(r.filter("textarea")),e=n(this).find("select").add(n(this).filter("select")),s=r.find("select").add(r.filter("select")),i=0,u=f.length;i<u;++i)n(o[i]).val(n(f[i]).val());for(i=0,u=e.length;i<u;++i)s[i].selectedIndex=e[i].selectedIndex;return r}}(n.fn.clone);r={A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,_0:48,_1:49,_2:50,_3:51,_4:52,_5:53,_6:54,_7:55,_8:56,_9:57,PARENRIGHT:48,EXCLAMATION:49,STRUDEL:50,POUND:51,DOLLAR:52,PERCENT:53,CARROT:54,AMPERSAND:55,ASTERISK:56,PARENLEFT:57,SPACE:32,ENTER:13,TAB:9,ESC:27,BACKSPACE:8,SHIFT:16,CONTROL:17,ALT:18,CAPSLOCK:20,NUMLOCK:144,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,SCROLLLOCK:145,BREAK:19,INSERT:45,DELETE:46,SEMICOLON:186,COLON:186,EQUAL:187,PLUS:187,COMMA:188,LESS:188,HYPHEN:189,PERIOD:190,GREATER:190,SQLEFT:219,CURLEFT:219,SQRIGHT:221,CURRIGHT:221,BACKTICK:192,TILDE:192,APOSTROPHE:222,QUOTE:222,BACKSLASH:220,BAR:220,FWDSLASH:191,QUESTION:191,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:96,NUM1:97,NUM2:98,NUM3:99,NUM4:100,NUM5:101,NUM6:102,NUM7:103,NUM8:104,NUM9:104,MULTIPLY:106,ADD:107,SUBTRACT:109,DIVIDE:111,DECIMAL:110,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,Modifiers:{CTRL:0,SHIFT:1,ALT:2}};o={};u=o;u.defaultsGlobal={initial:null,placeholder:"",defaulttext:"",keybindings:{UNFOCUS:new f(r.ESC),TOGGLE:new f([r.A,r.T],r.Modifiers.ALT),row:{ENTERIN:new f([r.TAB,r.E])}}};u.defaultsRows={draggable:!0,rows:2,keybindings:{INSERT:new f(r.ENTER,r.Modifiers.CTRL),DELETE:new f(r.DELETE,r.Modifiers.CTRL),MOVEUP:new f(r.UP,r.Modifiers.CTRL),MOVEDOWN:new f(r.DOWN,r.Modifiers.CTRL),SELECTUP:new f(r.UP,r.Modifiers.SHIFT),SELECTDOWN:new f(r.DOWN,r.Modifiers.SHIFT),CURSORUP:new f(r.UP),CURSORDOWN:new f(r.DOWN),SELECT:new f(r.S,r.Modifiers.ALT),row:{UNFOCUS:new f(r.ESC),INSERT:new f(r.N),DELETE:new f(r.DELETE),MOVEUP:new f([r.J,r.UP],r.Modifiers.CTRL),MOVEDOWN:new f([r.K,r.DOWN],r.Modifiers.CTRL),SELECTUP:new f([r.J,r.UP],r.Modifiers.SHIFT),SELECTDOWN:new f([r.K,r.DOWN],r.Modifiers.SHIFT),SELECTABOVE:new f([r.J,r.UP]),SELECTBELOW:new f([r.K,r.DOWN]),TOGGLE:new f([r.A,r.T],r.Modifiers.ALT)}}};u.defaultColumns={columns:2,keybindings:{CURSORLEFT:new f([r.LEFT,r.LESS],r.Modifiers.CTRL),CURSORRIGHT:new f([r.RIGHT,r.GREATER],r.Modifiers.CTRL)}};u.table=function(t,i){var r=this,u=n(t);r.container=u;r.original=u.contents().clone();r.options=i;r.data=i.initial};u.table.prototype={_init:function(){var i=n(this.container),t=this;return i.contents().remove(),t.data===null&&(t.data=[].repeat([].repeat(t.options.defaulttext,t.options.columns),t.options.rows)),t.data=e(t.data,t.options.defaulttext),t._generateTable(),i.addClass("dcContainer"),i.attr("tabindex",1),i.click(function(){t.deselectAll()}),i.find(".dcControlWrapper").click(function(n){n.stopPropagation()}),t},_isDisjoint:function(){var t=n(this.container),i=this;return t.find("tr.dcSubSelect").length>0},_registerInputEvents:function(i){var f=n(this.container),r=this,u=f.find(".dcTable");return i=n(i),i.click(function(n){n.stopPropagation()}),i.keydown(function(e){var o,s,h;e.stopPropagation();t(e,r.options.keybindings.UNFOCUS)?(e.preventDefault(),f.focus()):t(e,r.options.keybindings.INSERT)?(e.preventDefault(),r._selectSingle(n(this).closest("tr")),r.insert(),r._focusInSelection()):t(e,r.options.keybindings.DELETE)?(e.preventDefault(),r.remove()):t(e,r.options.keybindings.MOVEUP)?(e.preventDefault(),i.closest("tr").is(".dcSelected,.dcSubSelect")||r._selectSingle(i.closest("tr")),r.moveUp(),i.focusEnd()):t(e,r.options.keybindings.MOVEDOWN)?(e.preventDefault(),i.closest("tr").is(".dcSelected,.dcSubSelect")||r._selectSingle(i.closest("tr")),r.moveDown(),i.focusEnd()):t(e,r.options.keybindings.SELECTUP)?(e.preventDefault(),u.find(".dcSelected").length==0?(r._deselectSub(),r._selectSingle(u.find("tr:last-child"))):u.find(".dcSelected,.dcSubSelect").last().is(".dcSelected")?u.find(".dcSelected,.dcSubSelect").first().is(":first-child")||r._selectRange(u.find(".dcSelected,.dcSubSelect").first().prev()):r._selectRange(u.find(".dcSelected,.dcSubSelect").last().prev())):t(e,r.options.keybindings.SELECTDOWN)?(e.preventDefault(),u.find(".dcSelected").length==0?(r._deselectSub(),r._selectSingle(u.find("tr:first-child"))):u.find(".dcSelected,.dcSubSelect").first().is(".dcSelected")?u.find(".dcSelected,.dcSubSelect").is(":last-child")||r._selectRange(u.find(".dcSelected,.dcSubSelect").last().next()):r._selectRange(u.find(".dcSelected,.dcSubSelect").first().next())):t(e,r.options.keybindings.CURSORUP)?(e.preventDefault(),o=i.closest("tr"),s=o.find('input[type="text"],textarea').index(i),o.is(":first-child")?u.find("tr:last-child").find('input[type="text"],textarea').eq(s).focusEnd():o.prev().find('input[type="text"],textarea').eq(s).focusEnd()):t(e,r.options.keybindings.CURSORDOWN)?(e.preventDefault(),o=i.closest("tr"),s=o.find('input[type="text"],textarea').index(i),o.is(":last-child")?u.find("tr:first-child").find('input[type="text"],textarea').eq(s).focusEnd():o.next().find('input[type="text"],textarea').eq(s).focusEnd()):t(e,r.options.keybindings.CURSORLEFT)?(e.preventDefault(),i.closest("td").is(":first-child")||i.closest("td").prev().find('input[type="text"],textarea').first().focusEnd()):t(e,r.options.keybindings.CURSORRIGHT)?(e.preventDefault(),i.closest("td").is(":last-child")||i.closest("td").next().find('input[type="text"],textarea').first().focusEnd()):t(e,r.options.keybindings.TOGGLE)?(e.preventDefault(),h=n(this).parent(),r._toggleInput(h),h.find('input[type="text"],textarea').first().focusEnd()):t(e,r.options.keybindings.SELECT)&&(e.preventDefault(),r._selectDisjoint(n(this).closest("tr")))}),i.focus(function(){f.addClass("dcFocus")}),i.blur(function(){f.removeClass("dcFocus")}),i.change(function(n){f.change(n);r._updateData()}),r},_registerRowEvents:function(t){var r=n(this.container),i=this;return t=n(t),t.click(function(t){t.stopPropagation();r.focus();t.shiftKey?i._selectRange(n(this)):t.ctrlKey?i._selectDisjoint(n(this)):i._selectSingle(n(this))}),i},_registerToggleEvents:function(t){var r=n(this.container),i=this;return t.click(function(n){n.stopPropagation();r.focus();i._toggleInput(this)}),i},_generateTable:function(){var e=n(this.container),r=this,l=n(document.createElement("div")).addClass("dcObjWrapper").appendTo(e),u=n(document.createElement("table")).addClass("dcTable").appendTo(l),h,s,o;for(i=0;i<r.data.length;i++){for(h=n(document.createElement("tr")).appendTo(u),j=0;j<r.data[0].length;j++){var a=n(document.createElement("td")).appendTo(h),c=n(document.createElement("div")).appendTo(a),v=n(document.createElement("div")).addClass("dcToggle").attr("title","Click here to toggle input box size.").appendTo(c);r._registerToggleEvents(v);r.data[i][j].toString().length<50?(s=n(document.createElement("input")).attr("type","text").appendTo(c),s.val(r.data[i][j]),s.attr("placeholder",r.options.placeholder),r._registerInputEvents(s)):(o=n(document.createElement("textarea")).appendTo(c),o.val(r.data[i][j]),o.attr("placeholder",r.options.placeholder),o.attr("rows",5),r._registerInputEvents(o))}r._registerRowEvents(h);e.unbind("keydown");e.keydown(function(n){t(n,r.options.keybindings.row.UNFOCUS)?(n.preventDefault(),u.find(".dcSelected,.dcSubSelect").length>0?r.deselectAll():e.blur()):t(n,r.options.keybindings.row.INSERT)?(n.preventDefault(),r._isDisjoint()||r.insert()):t(n,r.options.keybindings.row.DELETE)?(n.preventDefault(),r.remove()):t(n,r.options.keybindings.row.ENTERIN)?(n.preventDefault(),r._focusInSelection()):t(n,r.options.keybindings.row.TOGGLE)?(n.preventDefault(),u.find(".dcSelected > td,.dcSubSelect > td").each(function(){r._toggleInput(this)})):u.find(".dcSelected,.dcSubSelect").length>0&&t(n,r.options.keybindings.row.MOVEUP)?(n.preventDefault(),r.moveUp()):u.find(".dcSelected,.dcSubSelect").length>0&&t(n,r.options.keybindings.row.SELECTUP)?(n.preventDefault(),u.find(".dcSelected,.dcSubSelect").last().is(".dcSelected")?u.find(".dcSelected,.dcSubSelect").is(":first-child")||r._selectRange(u.find(".dcSelected,.dcSubSelect").first().prev()):r._selectRange(u.find(".dcSelected,.dcSubSelect").last().prev())):u.find(".dcSelected,.dcSubSelect").length>0&&t(n,r.options.keybindings.row.SELECTABOVE)?(n.preventDefault(),r._deselectSub(),u.find(".dcSelected").is(":first-child")?r._selectSingle(u.find("tr:last-child")):r._selectSingle(u.find(".dcSelected").prev())):t(n,r.options.keybindings.row.SELECTABOVE)?(n.preventDefault(),r._selectSingle(u.find("tr:last-child"))):u.find(".dcSelected,.dcSubSelect").length>0&&t(n,r.options.keybindings.row.MOVEDOWN)?(n.preventDefault(),r.moveDown()):u.find(".dcSelected,.dcSubSelect").length>0&&t(n,r.options.keybindings.row.SELECTDOWN)?(n.preventDefault(),u.find(".dcSelected,.dcSubSelect").first().is(".dcSelected")?u.find(".dcSelected,.dcSubSelect").is(":last-child")||r._selectRange(u.find(".dcSelected,.dcSubSelect").last().next()):r._selectRange(u.find(".dcSelected,.dcSubSelect").first().next())):u.find(".dcSelected,.dcSubSelect").length>0&&t(n,r.options.keybindings.row.SELECTBELOW)?(n.preventDefault(),r._deselectSub(),u.find(".dcSelected").is(":last-child")?r._selectSingle(u.find("tr:first-child")):r._selectSingle(u.find(".dcSelected").next())):t(n,r.options.keybindings.row.SELECTBELOW)&&(n.preventDefault(),r._selectSingle(u.find("tr:first-child")));r._updateData()});r.options.draggable&&n.ui&&n.fn.sortable&&u.find("tbody").sortable({axis:"y",helper:function(t,i){var f,e;return i.children().each(function(){n(this).width(n(this).width())}),i.is(".dcSelected,.dcSubSelect")||r._selectSingle(i),f=u.find(".dcSelected,.dcSubSelect").clone(),i.data("multidrag",f).siblings(".dcSelected,.dcSubSelect").remove(),e=n("<tr />"),e.append(f)},stop:function(t,i){var f=i.item.data("multidrag");f.each(function(){r._registerRowEvents(n(this));r._registerInputEvents(n(this).find('input[type="text"],textarea'));r._registerToggleEvents(n(this).find(".dcToggle"))});i.item.after(f).remove();r._selectSingle(f.first());f.length>1&&r._selectRange(f.last());u.find("tr").hide().show(0);e.change();r._updateData()}})}var y=n(document.createElement("div")).addClass("dcControlWrapper").appendTo(l),p=n(document.createElement("div")).addClass("dcControlPanel").appendTo(y),f=n(document.createElement("ul")).appendTo(p),w=n(document.createElement("li")).text("Select All").click(function(n){n.stopPropagation();r.selectAll()}).appendTo(f),b=n(document.createElement("li")).text("Deselect All").click(function(n){n.stopPropagation();r.deselectAll()}).appendTo(f),k=n(document.createElement("li")).text("Move Up").addClass("dcMove dcDisabled").click(function(t){t.stopPropagation();n(this).hasClass("dcDisabled")||r.moveUp()}).appendTo(f),d=n(document.createElement("li")).text("Move Down").addClass("dcMove dcDisabled").click(function(t){t.stopPropagation();n(this).hasClass("dcDisabled")||r.moveDown()}).appendTo(f),g=n(document.createElement("li")).text("Insert").addClass("dcInsert").click(function(t){t.stopPropagation();n(this).hasClass("dcDisabled")||(r.insert(),r._focusInSelection())}).appendTo(f),nt=n(document.createElement("li")).text("Remove").addClass("dcRemove dcDisabled").click(function(n){n.stopPropagation();r.remove()}).appendTo(f);return r},_updateData:function(){for(var u,t,o=n(this.container),f=this,i=o.find(".dcTable"),e=[],r=0;r<i.find("tr").length;r++){for(u=[],t=0;t<i.find("tr:first").find("td").length;t++)u.push(i.find("tr").eq(r).find("td").eq(t).find('input[type="text"],textarea').val());e.push(u)}return f.data=e,f},_enableInsert:function(){var t=n(this.container),i=this;return t.find(".dcInsert").removeClass("dcDisabled"),i},_disableInsert:function(){var t=n(this.container),i=this;return t.find(".dcInsert").addClass("dcDisabled"),i},_enableMove:function(){var t=n(this.container),i=this;return t.find(".dcMove").removeClass("dcDisabled"),i},_disableMove:function(){var t=n(this.container),i=this;return t.find(".dcMove").addClass("dcDisabled"),i},_enableRemove:function(){var t=n(this.container),i=this;return t.find(".dcRemove").removeClass("dcDisabled"),i},_disableRemove:function(){var t=n(this.container),i=this;return t.find(".dcRemove").addClass("dcDisabled"),i},_focusInSelection:function(t,i){var r=n(this.container),u=this;return r.find(".dcTable").find(".dcSelected,.dcSubSelect").length==0&&r.find(".dcTable").find("tr").first().find('input[type="text"],textarea').focusEnd(),t=t||0,i=i||0,r.find(".dcTable").find(".dcSelected,.dcSubSelect").eq(t).find('input[type="text"],textarea').eq(i).focusEnd(),u},_toggleInput:function(t){var u=n(this.container),f=this,e,i;if(t=n(t),t.prop("tagName")=="DIV"&&(t=t.closest("td")),e=u.height(),i=t.find('input[type="text"],textarea'),i.prop("tagName")=="INPUT"){var o=i.val(),s=i.attr("placeholder"),r=n(document.createElement("textarea")).insertAfter(i);r.val(o);r.attr("placeholder",s);r.attr("rows",5);i.remove();f._registerInputEvents(r)}else{var o=i.val(),s=i.attr("placeholder"),r=n(document.createElement("input")).attr("type","text").insertAfter(i);r.val(o);r.attr("placeholder",s);i.remove();f._registerInputEvents(r)}return u.height()!=e&&u.resize(),f},_selectSingle:function(t){var r=n(this.container),i=this;return i.deselectAll(),i._enableInsert(),i._enableMove(),i._enableRemove(),t=n(t),t.prop("tagName")=="TD"&&(t=t.parent()),t.addClass("dcSelected"),i},_selectRange:function(t){var f=n(this.container),i=this,e,u,r;if(i._enableInsert(),i._enableMove(),i._enableRemove(),t=n(t),t.prop("tagName")=="TD"&&(t=t.parent()),t.hasClass("dcSelected"))f.find(".dcTable").find(".dcSubSelect").length>0?i._deselectSub():i.deselectAll();else if(f.find(".dcTable").find(".dcSelected").length==0)i._selectSingle(t);else for(i._deselectSub(),t.addClass("dcSubSelect"),e=t.nextAll(".dcSelected").length==1,u=e?t.nextAll("tr"):t.prevAll("tr"),r=0;r<u.length;r++){if(u.eq(r).hasClass("dcSelected"))return;u.eq(r).addClass("dcSubSelect")}return i},_selectDisjoint:function(t){var r=n(this.container),i=this;return i._disableInsert(),i._enableMove(),i._enableRemove(),t=n(t),t.prop("tagName")=="TD"&&(t=t.parent()),r.find(".dcTable").find(".dcSelected,.dcSubSelect").length>0?t.is(".dcSelected,.dcSubSelect")?t.removeClass("dcSelected").removeClass("dcSubSelect"):t.addClass("dcSubSelect"):i._selectSingle(t),i},_deselect:function(){var i=n(this.container),t=this;return i.find(".dcTable").find("tr").removeClass("dcSelected"),i.find(".dcTable").find(".dcSelected,.dcSubSelect").length==0&&(t._disableMove(),t._disableRemove()),t},_deselectSub:function(){var i=n(this.container),t=this;return i.find(".dcTable").find("tr").removeClass("dcSubSelect"),i.find(".dcTable").find(".dcSelected,.dcSubSelect").length==0&&(t._disableMove(),t._disableRemove()),t},_redraw:function(){var i=n(this.container),t=this;return i.contents().remove(),t._generateTable(),t},selectAll:function(){var i=n(this.container),t=this;return t._selectSingle(i.find(".dcTable").find("tr:first-child")),i.find(".dcTable").find("tr").length>1&&t._selectRange(i.find(".dcTable").find("tr:last-child")),t._enableInsert(),t},deselectAll:function(){var i=n(this.container),t=this;return t._deselect(),t._deselectSub(),t._enableInsert(),t},getData:function(){var i=n(this.container),t=this;return t.data},setData:function(t){var r=n(this.container),i=this;(typeof t=="undefined"||t===null)&&(t=[].repeat([].repeat(i.options.defaulttext,i.options.columns),i.options.rows));t=e(t,i.options.defaulttext);i.data=t;i._redraw()},setElement:function(t,i,r){var f=n(this.container),u=this;(typeof r=="undefined"||r===null)&&(r=u.options.defaulttext);u.data[i][t]=r;u._redraw()},moveUp:function(){var i=n(this.container),r=this,t=i.find(".dcTable");return t.find(".dcSelected,.dcSubSelect").length>0&&!t.find(".dcSelected,.dcSubSelect").is(":first-child")&&(t.find(".dcSelected,.dcSubSelect").each(function(){n(this).insertBefore(n(this).prev())}),i.change()),r._updateData(),r},moveDown:function(){var i=n(this.container),r=this,t=i.find(".dcTable");return t.find(".dcSelected,.dcSubSelect").length>0&&!t.find(".dcSelected,.dcSubSelect").is(":last-child")&&(n(t.find(".dcSelected,.dcSubSelect").get().reverse()).each(function(){n(this).insertAfter(n(this).next())}),i.change()),r._updateData(),r},insert:function(){var u=n(this.container),t=this,o=u.height(),r=n(document.createElement("tr")),f,i;for(j=0;j<t.data[0].length;j++){var s=n(document.createElement("td")).appendTo(r),e=n(document.createElement("div")).appendTo(s),h=n(document.createElement("div")).addClass("dcToggle").attr("title","Click here to toggle input box size.").appendTo(e);t._registerToggleEvents(h);f=n(document.createElement("input")).attr("type","text").appendTo(e);f.val(t.options.defaulttext);f.attr("placeholder",t.options.placeholder);t._registerInputEvents(f)}return i=u.find(".dcTable"),i.find("tr").length==0?i.append(r):i.find(".dcSelected").length==1?i.find(".dcSubSelect").length>0?i.find(".dcSelected,.dcSubSelect").last().after(r):i.find(".dcSelected").after(r):i.find("tr:last-child").after(r),t._registerRowEvents(r),t._selectSingle(r),u.change(),u.height()!=o&&u.resize(),t._updateData(),t},remove:function(){var t=n(this.container),i=this,r=t.find(".dcTable"),u;return r.find(".dcSelected,.dcSubSelect").length>0&&confirm("Are you sure you wish to delete the selected rows?")&&(u=t.height(),r.find(".dcSelected,.dcSubSelect").remove(),r.find("tr").length==0?i.insert():(i._enableInsert(),i._disableMove(),i._disableRemove()),t.change(),t.height()!=u&&t.resize()),t.focus(),i._updateData(),i},reset:function(){var i=n(this.container),t=this;return t.destroy(),t._init(),t},destroy:function(){var t=n(this.container),i=this;return i.data=i.options.initial,t.removeClass("dcContainer").removeAttr("tabindex"),t.contents().remove(),t.removeData("dynamictable"),t.append(i.original),t[0]}};u.list=function(t,i){var r=this,u=n(t);r.container=u;r.original=u.contents().clone();r.options=i;r.data=i.initial};u.list.prototype={_init:function(){var i=n(this.container),t=this;return i.contents().remove(),t.data===null&&(t.data=[].repeat(t.options.defaulttext,t.options.rows)),t._generateList(),i.addClass("dcContainer"),i.attr("tabindex",1),i.click(function(){t.deselectAll()}),i.find(".dcControlWrapper").click(function(n){n.stopPropagation()}),t},_isDisjoint:function(){var t=n(this.container),i=this;return t.find("li.dcSubSelect").length>0},_registerInputEvents:function(i){var f=n(this.container),r=this,u=f.find(".dcList");return i=n(i),i.click(function(n){n.stopPropagation()}),i.keydown(function(e){var o,s;e.stopPropagation();t(e,r.options.keybindings.UNFOCUS)?(e.preventDefault(),f.focus()):t(e,r.options.keybindings.INSERT)?(e.preventDefault(),r._selectSingle(n(this).closest("li")),r.insert(),r._focusInSelection()):t(e,r.options.keybindings.DELETE)?(e.preventDefault(),r.remove()):t(e,r.options.keybindings.MOVEUP)?(e.preventDefault(),i.closest("li").is(".dcSelected,.dcSubSelect")||r._selectSingle(i.closest("li")),r.moveUp(),i.focusEnd()):t(e,r.options.keybindings.MOVEDOWN)?(e.preventDefault(),i.closest("li").is(".dcSelected,.dcSubSelect")||r._selectSingle(i.closest("li")),r.moveDown(),i.focusEnd()):t(e,r.options.keybindings.SELECTUP)?(e.preventDefault(),u.find(".dcSelected").length==0?r._selectSingle(u.find("li:last-child")):u.find(".dcSelected,.dcSubSelect").last().is(".dcSelected")?u.find(".dcSelected,.dcSubSelect").first().is(":first-child")||r._selectRange(u.find(".dcSelected,.dcSubSelect").first().prev()):r._selectRange(u.find(".dcSelected,.dcSubSelect").last().prev())):t(e,r.options.keybindings.SELECTDOWN)?(e.preventDefault(),u.find(".dcSelected").length==0?r._selectSingle(u.find("li:first-child")):u.find(".dcSelected,.dcSubSelect").first().is(".dcSelected")?u.find(".dcSelected,.dcSubSelect").is(":last-child")||r._selectRange(u.find(".dcSelected,.dcSubSelect").last().next()):r._selectRange(u.find(".dcSelected,.dcSubSelect").first().next())):t(e,r.options.keybindings.CURSORUP)?(e.preventDefault(),o=i.closest("li"),o.is(":first-child")?u.find("li:last-child").find('input[type="text"],textarea').first().focusEnd():o.prev().find('input[type="text"],textarea').first().focusEnd()):t(e,r.options.keybindings.CURSORDOWN)?(e.preventDefault(),o=i.closest("li"),o.is(":last-child")?u.find("li:first-child").find('input[type="text"],textarea').first().focusEnd():o.next().find('input[type="text"],textarea').first().focusEnd()):t(e,r.options.keybindings.TOGGLE)?(e.preventDefault(),s=n(this).parent(),r._toggleInput(s),s.find('input[type="text"],textarea').first().focusEnd()):t(e,r.options.keybindings.SELECT)&&(e.preventDefault(),r._selectDisjoint(n(this).closest("li")))}),i.focus(function(){f.addClass("dcFocus")}),i.blur(function(){f.removeClass("dcFocus")}),i.change(function(n){f.change(n);r._updateData()}),r},_registerRowEvents:function(t){var r=n(this.container),i=this;return t=n(t),t.click(function(t){t.stopPropagation();r.focus();t.shiftKey?i._selectRange(n(this)):t.ctrlKey?i._selectDisjoint(n(this)):i._selectSingle(n(this))}),i},_registerToggleEvents:function(t){var r=n(this.container),i=this;return t.click(function(n){n.stopPropagation();r.focus();i._toggleInput(this)}),i},_generateList:function(){var o=n(this.container),r=this,c=n(document.createElement("div")).addClass("dcObjWrapper").appendTo(o),u=n(document.createElement("ul")).addClass("dcList").appendTo(c),h,e;for(i=0;i<r.data.length;i++){var l=n(document.createElement("li")).appendTo(u),s=n(document.createElement("div")).appendTo(l),p=n(document.createElement("div")).addClass("dcBullet").text("•").appendTo(s),a=n(document.createElement("div")).addClass("dcToggle").attr("title","Click here to toggle input box size.").appendTo(s);r._registerToggleEvents(a);r.data[i].toString().length<50?(h=n(document.createElement("input")).attr("type","text").appendTo(s),h.val(r.data[i]),h.attr("placeholder",r.options.placeholder),r._registerInputEvents(h)):(e=n(document.createElement("textarea")).appendTo(s),e.val(r.data[i]),e.attr("placeholder",r.options.placeholder),e.attr("rows",5),r._registerInputEvents(e));r._registerRowEvents(l)}o.keydown(function(n){t(n,r.options.keybindings.row.UNFOCUS)?(n.preventDefault(),u.find(".dcSelected,.dcSubSelect").length>0?r.deselectAll():o.blur()):t(n,r.options.keybindings.row.INSERT)?(n.preventDefault(),r._isDisjoint()||r.insert()):t(n,r.options.keybindings.row.DELETE)?(n.preventDefault(),r.remove()):t(n,r.options.keybindings.row.ENTERIN)?(n.preventDefault(),r._focusInSelection()):t(n,r.options.keybindings.row.TOGGLE)?(n.preventDefault(),u.find(".dcSelected > div,.dcSubSelect > div").each(function(){r._toggleInput(this)})):u.find(".dcSelected,.dcSubSelect").length>0&&t(n,r.options.keybindings.row.MOVEUP)?(n.preventDefault(),r.moveUp()):u.find(".dcSelected,.dcSubSelect").length>0&&t(n,r.options.keybindings.row.SELECTUP)?(n.preventDefault(),u.find(".dcSelected,.dcSubSelect").last().is(".dcSelected")?u.find(".dcSelected,.dcSubSelect").is(":first-child")||r._selectRange(u.find(".dcSelected,.dcSubSelect").first().prev()):r._selectRange(u.find(".dcSelected,.dcSubSelect").last().prev())):u.find(".dcSelected,.dcSubSelect").length>0&&t(n,r.options.keybindings.row.SELECTABOVE)?(n.preventDefault(),r._deselectSub(),u.find(".dcSelected").is(":first-child")?r._selectSingle(u.find("li:last-child")):r._selectSingle(u.find(".dcSelected").prev())):t(n,r.options.keybindings.row.SELECTABOVE)?(n.preventDefault(),r._selectSingle(u.find("li:last-child"))):u.find(".dcSelected,.dcSubSelect").length>0&&t(n,r.options.keybindings.row.MOVEDOWN)?(n.preventDefault(),r.moveDown()):u.find(".dcSelected,.dcSubSelect").length>0&&t(n,r.options.keybindings.row.SELECTDOWN)?(n.preventDefault(),u.find(".dcSelected,.dcSubSelect").first().is(".dcSelected")?u.find(".dcSelected,.dcSubSelect").is(":last-child")||r._selectRange(u.find(".dcSelected,.dcSubSelect").last().next()):r._selectRange(u.find(".dcSelected,.dcSubSelect").first().next())):u.find(".dcSelected,.dcSubSelect").length>0&&t(n,r.options.keybindings.row.SELECTBELOW)?(n.preventDefault(),r._deselectSub(),u.find(".dcSelected").is(":last-child")?r._selectSingle(u.find("li:first-child")):r._selectSingle(u.find(".dcSelected").next())):t(n,r.options.keybindings.row.SELECTBELOW)&&(n.preventDefault(),r._selectSingle(u.find("li:first-child")));r._updateData()});r.options.draggable&&n.ui&&n.fn.sortable&&u.sortable({axis:"y",helper:function(t,i){var f,e;return i.is(".dcSelected,.dcSubSelect")||r._selectSingle(i),f=u.find(".dcSelected,.dcSubSelect").clone(),i.data("multidrag",f).siblings(".dcSelected,.dcSubSelect").remove(),e=n("<li />"),e.append(f)},stop:function(t,i){var u=i.item.data("multidrag");u.each(function(){r._registerRowEvents(n(this));r._registerInputEvents(n(this).find('input[type="text"],textarea'));r._registerToggleEvents(n(this).find(".dcToggle"))});i.item.after(u).remove();r._selectSingle(u.first());u.length>1&&r._selectRange(u.last());o.change();r._updateData()}});var v=n(document.createElement("div")).addClass("dcControlWrapper").appendTo(c),y=n(document.createElement("div")).addClass("dcControlPanel").appendTo(v),f=n(document.createElement("ul")).appendTo(y),w=n(document.createElement("li")).text("Select All").click(function(n){n.stopPropagation();r.selectAll()}).appendTo(f),b=n(document.createElement("li")).text("Deselect All").click(function(n){n.stopPropagation();r.deselectAll()}).appendTo(f),k=n(document.createElement("li")).text("Move Up").addClass("dcMove dcDisabled").click(function(t){t.stopPropagation();n(this).hasClass("dcDisabled")||r.moveUp()}).appendTo(f),d=n(document.createElement("li")).text("Move Down").addClass("dcMove dcDisabled").click(function(t){t.stopPropagation();n(this).hasClass("dcDisabled")||r.moveDown()}).appendTo(f),g=n(document.createElement("li")).text("Insert").addClass("dcInsert").click(function(t){t.stopPropagation();n(this).hasClass("dcDisabled")||(r.insert(),r._focusInSelection())}).appendTo(f),nt=n(document.createElement("li")).text("Remove").addClass("dcRemove dcDisabled").click(function(n){n.stopPropagation();r.remove()}).appendTo(f);return r},_updateData:function(){for(var f=n(this.container),i=this,r=f.find(".dcList"),u=[],t=0;t<r.find("li").length;t++)u.push(r.find("li").eq(t).find('input[type="text"],textarea').val());return i.data=u,i},_enableInsert:function(){var t=n(this.container),i=this;return t.find(".dcInsert").removeClass("dcDisabled"),i},_disableInsert:function(){var t=n(this.container),i=this;return t.find(".dcInsert").addClass("dcDisabled"),i},_enableMove:function(){var t=n(this.container),i=this;return t.find(".dcMove").removeClass("dcDisabled"),i},_disableMove:function(){var t=n(this.container),i=this;return t.find(".dcMove").addClass("dcDisabled"),i},_enableRemove:function(){var t=n(this.container),i=this;return t.find(".dcRemove").removeClass("dcDisabled"),i},_disableRemove:function(){var t=n(this.container),i=this;return t.find(".dcRemove").addClass("dcDisabled"),i},_focusInSelection:function(t){var i=n(this.container),r=this;return i.find(".dcList").find(".dcSelected,.dcSubSelect").length==0&&i.find(".dcList").find("li").first().find('input[type="text"],textarea').focusEnd(),t=t||0,i.find(".dcList").find(".dcSelected,.dcSubSelect").eq(t).find('input[type="text"],textarea').focusEnd(),r},_toggleInput:function(t){var u=n(this.container),f=this,e,i;if(t=n(t),t.prop("tagName")=="DIV"&&(t=t.closest("li")),e=u.height(),i=t.find('input[type="text"],textarea'),i.prop("tagName")=="INPUT"){var o=i.val(),s=i.attr("placeholder"),r=n(document.createElement("textarea")).insertAfter(i);r.val(o);r.attr("placeholder",s);r.attr("rows",5);i.remove();f._registerInputEvents(r)}else{var o=i.val(),s=i.attr("placeholder"),r=n(document.createElement("input")).attr("type","text").insertAfter(i);r.val(o);r.attr("placeholder",s);i.remove();f._registerInputEvents(r)}return u.height()!=e&&u.resize(),f},_selectSingle:function(t){var r=n(this.container),i=this;return i.deselectAll(),i._enableInsert(),i._enableMove(),i._enableRemove(),t=n(t),t.prop("tagName")=="DIV"&&(t=t.parent()),t.addClass("dcSelected"),i},_selectRange:function(t){var f=n(this.container),i=this,e,u,r;if(i._enableInsert(),i._enableMove(),i._enableRemove(),t=n(t),t.prop("tagName")=="DIV"&&(t=t.parent()),t.hasClass("dcSelected"))f.find(".dcList").find(".dcSubSelect").length>0?i._deselectSub():i.deselectAll();else if(f.find(".dcList").find(".dcSelected").length==0)i._selectSingle(t);else for(i._deselectSub(),t.addClass("dcSubSelect"),e=t.nextAll(".dcSelected").length==1,u=e?t.nextAll("li"):t.prevAll("li"),r=0;r<u.length;r++){if(u.eq(r).hasClass("dcSelected"))return;u.eq(r).addClass("dcSubSelect")}return i},_selectDisjoint:function(t){var r=n(this.container),i=this;return i._disableInsert(),i._enableMove(),i._enableRemove(),t=n(t),t.prop("tagName")=="DIV"&&(t=t.parent()),r.find(".dcList").find(".dcSelected,.dcSubSelect").length>0?t.is(".dcSelected,.dcSubSelect")?t.removeClass("dcSelected").removeClass("dcSubSelect"):t.addClass("dcSubSelect"):i._selectSingle(t),i},_deselect:function(){var i=n(this.container),t=this;return i.find(".dcList").find("li").removeClass("dcSelected"),i.find(".dcList").find(".dcSelected,.dcSubSelect").length==0&&(t._disableMove(),t._disableRemove()),t},_deselectSub:function(){var i=n(this.container),t=this;return i.find(".dcList").find("li").removeClass("dcSubSelect"),i.find(".dcList").find(".dcSelected,.dcSubSelect").length==0&&(t._disableMove(),t._disableRemove()),t},_redraw:function(){var i=n(this.container),t=this;return i.contents().remove(),t._generateList(),t},selectAll:function(){var i=n(this.container),t=this;return t._selectSingle(i.find(".dcList").find("li:first-child")),i.find(".dcList").find("li").length>1&&t._selectRange(i.find(".dcList").find("li:last-child")),t._enableInsert(),t},deselectAll:function(){var i=n(this.container),t=this;return t._deselect(),t._deselectSub(),t._enableInsert(),t},getData:function(){var i=n(this.container),t=this;return t.data},setData:function(t){var r=n(this.container),i=this;(typeof t=="undefined"||t===null)&&(t=[].repeat(i.options.defaulttext,i.options.rows));i.data=t;i._redraw()},setElement:function(t,i){var u=n(this.container),r=this;(typeof i=="undefined"||i===null)&&(i=r.options.defaulttext);r.data[t]=i;r._redraw()},moveUp:function(){var i=n(this.container),r=this,t=i.find(".dcList");return t.find(".dcSelected,.dcSubSelect").length>0&&!t.find(".dcSelected,.dcSubSelect").is(":first-child")&&(t.find(".dcSelected,.dcSubSelect").each(function(){n(this).insertBefore(n(this).prev())}),i.change()),r._updateData(),r},moveDown:function(){var i=n(this.container),r=this,t=i.find(".dcList");return t.find(".dcSelected,.dcSubSelect").length>0&&!t.find(".dcSelected,.dcSubSelect").is(":last-child")&&(n(t.find(".dcSelected,.dcSubSelect").get().reverse()).each(function(){n(this).insertAfter(n(this).next())}),i.change()),r._updateData(),r},insert:function(){var u=n(this.container),t=this,o=u.height(),r=n(document.createElement("li")),e=n(document.createElement("div")).appendTo(r),h=n(document.createElement("div")).addClass("dcBullet").text("•").appendTo(e),s=n(document.createElement("div")).addClass("dcToggle").attr("title","Click here to toggle input box size.").appendTo(e),f,i;return t._registerToggleEvents(s),f=n(document.createElement("input")).attr("type","text").appendTo(e),f.val(t.options.defaulttext),f.attr("placeholder",t.options.placeholder),t._registerInputEvents(f),i=u.find(".dcList"),i.find("li").length==0?i.append(r):i.find(".dcSelected").length==1?i.find(".dcSubSelect").length>0?i.find(".dcSelected,.dcSubSelect").last().after(r):i.find(".dcSelected").after(r):i.find("li:last-child").after(r),t._registerRowEvents(r),t._selectSingle(r),u.change(),u.height()!=o&&u.resize(),t._updateData(),t},remove:function(){var t=n(this.container),i=this,r=t.find(".dcList"),u;return r.find(".dcSelected,.dcSubSelect").length>0&&confirm("Are you sure you wish to delete the selected rows?")&&(u=t.height(),r.find(".dcSelected,.dcSubSelect").remove(),r.find("li").length==0?i.insert():(i._enableInsert(),i._disableMove(),i._disableRemove()),t.change(),t.height()!=u&&t.resize()),t.focus(),i._updateData(),i},reset:function(){var i=n(this.container),t=this;return t.destroy(),t._init(),t},destroy:function(){var t=n(this.container),i=this;return i.data=i.options.initial,t.removeClass("dcContainer").removeAttr("tabindex"),t.contents().remove(),t.removeData("dynamiclist"),t.append(i.original),t[0]}};u.text=function(t,i){var r=this,u=n(t);r.container=u;r.original=u.contents().clone();r.options=i;r.data=i.initial};u.text.prototype={_init:function(){var i=n(this.container),t=this;return i.contents().remove(),t.data===null&&(t.data=t.options.defaulttext),t._generateText(),i.addClass("dcContainer"),i.attr("tabindex",1),t},_registerInputEvents:function(i){var r=n(this.container),u=this,f=r.find(".dcText");return i=n(i),i.click(function(n){n.stopPropagation()}),i.keydown(function(i){if(i.stopPropagation(),t(i,u.options.keybindings.UNFOCUS))i.preventDefault(),r.focus();else if(t(i,u.options.keybindings.TOGGLE)){i.preventDefault();var f=n(this).parent();u._toggleInput(f);f.find('input[type="text"],textarea').first().focusEnd()}}),i.focus(function(){r.addClass("dcFocus")}),i.blur(function(){r.removeClass("dcFocus")}),i.change(function(n){r.change(n);u._updateData()}),u},_registerToggleEvents:function(t){var r=n(this.container),i=this;return t.click(function(n){n.stopPropagation();r.focus();i._toggleInput(this)}),i},_generateText:function(){var u=n(this.container),i=this,o=n(document.createElement("div")).addClass("dcObjWrapper").appendTo(u),s=n(document.createElement("div")).addClass("dcText").appendTo(o),e=n(document.createElement("div")).addClass("dcTextInnerWrapper").appendTo(s),h=n(document.createElement("div")).addClass("dcToggle").attr("title","Click here to toggle input box size.").appendTo(e),f,r;i._registerToggleEvents(h);i.data.toString().length<50?(f=n(document.createElement("input")).attr("type","text").appendTo(e),f.val(i.data),f.attr("placeholder",i.options.placeholder),i._registerInputEvents(f)):(r=n(document.createElement("textarea")).appendTo(e),r.val(i.data),r.attr("placeholder",i.options.placeholder),r.attr("rows",5),i._registerInputEvents(r));u.keydown(function(n){t(n,i.options.keybindings.row.UNFOCUS)?(n.preventDefault(),u.blur()):t(n,i.options.keybindings.row.ENTERIN)?(n.preventDefault(),i._focusInput()):t(n,i.options.keybindings.row.TOGGLE)&&(n.preventDefault(),i._toggleInput(u.find(".dcText")));i._updateData()})},_updateData:function(){var i=n(this.container),t=this;return t.data=i.find(".dcText").find('input[type="text"],textarea').first().val(),t},_toggleInput:function(t){var u=n(this.container),f=this,e,i;if(t=n(t),t.hasClass("dcToggle")&&(t=t.parent()),e=u.height(),i=t.find('input[type="text"],textarea'),i.prop("tagName")=="INPUT"){var o=i.val(),s=i.attr("placeholder"),r=n(document.createElement("textarea")).insertAfter(i);r.val(o);r.attr("placeholder",s);r.attr("rows",5);i.remove();f._registerInputEvents(r)}else{var o=i.val(),s=i.attr("placeholder"),r=n(document.createElement("input")).attr("type","text").insertAfter(i);r.val(o);r.attr("placeholder",s);i.remove();f._registerInputEvents(r)}return u.height()!=e&&u.resize(),f},_focusInput:function(){var t=n(this.container),i=this;return t.find(".dcText").find('input[type="text"],textarea').focusEnd(),i},_redraw:function(){var i=n(this.container),t=this;return i.contents().remove(),t._generateText(),t},getData:function(){var i=n(this.container),t=this;return t.data},setData:function(t){var r=n(this.container),i=this;(typeof t=="undefined"||t===null)&&(t=i.options.defaulttext);i.data=t;i._redraw()},reset:function(){var i=n(this.container),t=this;return t.destroy(),t._init(),t},destroy:function(){var t=n(this.container),i=this;return i.data=i.options.initial,t.removeClass("dcContainer").removeAttr("tabindex"),t.contents().remove(),t.removeData("dynamictext"),t.append(i.original),t[0]}};n.fn.dynamicTable=function(){var r=n(this),i,e,f,t;if(arguments.length==0)return r;if(i=arguments[0],typeof i=="string"){if(t=r.data("dynamictable"),f=n.extend(!0,{},u.defaultsGlobal,u.defaultsRows,u.defaultColumns,t),t||r.data("dynamictable",t=new u.table(r,f)),typeof t[i]!="function")throw"Unknown method: "+i;if(i.startsWith("_"))throw"Cannot access private method "+i+" from a public context.";return e=t[i].apply(t,Array.prototype.slice.call(arguments,1)),r.data("dynamictable",t),e}return s(i)?(f=n.extend(!0,{},u.defaultsGlobal,u.defaultsRows,u.defaultColumns,{initial:i}),t=new u.table(r,f),t._init(),r.data("dynamictable",t)):typeof i=="object"&&(f=n.extend(!0,{},u.defaultsGlobal,u.defaultsRows,u.defaultColumns,i),t=new u.table(r,f),t._init(),r.data("dynamictable",t)),r};n.fn.dynamicList=function(){var r=n(this),i,e,f,t;if(arguments.length==0)return r;if(i=arguments[0],typeof i=="string"){if(t=r.data("dynamiclist"),f=n.extend(!0,{},u.defaultsGlobal,u.defaultsRows,t),t||r.data("dynamiclist",t=new u.list(r,f)),typeof t[i]!="function")throw"Unknown method: "+i;if(i.startsWith("_"))throw"Cannot access private method "+i+" from a public context.";return e=t[i].apply(t,Array.prototype.slice.call(arguments,1)),r.data("dynamiclist",t),e}return n.isArray(i)?(f=n.extend(!0,{},u.defaultsGlobal,u.defaultsRows,{initial:i}),t=new u.list(r,f),t._init(),r.data("dynamiclist",t)):typeof i=="object"&&(f=n.extend(!0,{},u.defaultsGlobal,u.defaultsRows,i),t=new u.list(r,f),t._init(),r.data("dynamiclist",t)),r};n.fn.dynamicText=function(){var r=n(this),i,e,f,t;if(arguments.length==0)return r;if(i=arguments[0],typeof i=="string"){if(t=r.data("dynamictext"),f=n.extend({},u.defaultsGlobal,t),t||r.data("dynamictext",t=new u.text(r,f)),typeof t[i]!="function")throw"Unknown method: "+i;if(i.startsWith("_"))throw"Cannot access private method "+i+" from a public context.";return e=t[i].apply(t,Array.prototype.slice.call(arguments,1)),r.data("dynamictext",t),e}return typeof i=="object"&&(f=n.extend({},u.defaultsGlobal,i),t=new u.text(r,f),t._init(),r.data("dynamictext",t)),r}})(jQuery);
/*
//# sourceMappingURL=dynamiccontrols.min.js.map
*/