(function(n){function r(t){var r,i;if(!n.isArray(t))return!1;for(r=!0,i=0;i<t.length;i++)if(!n.isArray(t[i]))return!1;return!0}function u(t,i){for(var f,u=0,e=t.length,r=0;r<e;r++)u=Math.max(t[r].length,u);for(r=0;r<e;r++)if(n.isArray(t[r])){if(t[r].length!=u)for(f=t[r].length;f<u;f++)t[r].push(i)}else t[r]=[].repeat(i,u);return t}typeof Array.prototype.repeat!="function"&&(Array.prototype.repeat=function(n,t){while(t)this[t--]=n;return this});typeof String.prototype.startsWith!="function"&&(String.prototype.startsWith=function(n){return this.slice(0,n.length)==n});n.fn.setCursorPosition=function(t){return n(this).length===0?this:n(this).setSelection(t,t)};n.fn.setSelection=function(t,i){if(n(this).length==0)return this;if(input=n(this)[0],input.createTextRange){var r=input.createTextRange();r.collapse(!0);r.moveEnd("character",i);r.moveStart("character",t);r.select()}else input.setSelectionRange&&(input.focus(),input.setSelectionRange(t,i));return this};n.fn.focusEnd=function(){return n(this).setCursorPosition(n(this).val().length),this},function(t){n.fn.clone=function(){for(var r=t.apply(n(this),arguments),f=n(this).find("textarea").add(n(this).filter("textarea")),o=r.find("textarea").add(r.filter("textarea")),e=n(this).find("select").add(n(this).filter("select")),s=r.find("select").add(r.filter("select")),i=0,u=f.length;i<u;++i)n(o[i]).val(n(f[i]).val());for(i=0,u=e.length;i<u;++i)s[i].selectedIndex=e[i].selectedIndex;return r}}(n.fn.clone);var t={};t.defaults={initial:null,placeholder:"",defaulttext:"",draggable:!0,columns:2,rows:2};t.table=function(t,i){var r=this,u=n(t);r.container=u;r.original=u.contents().clone();r.options=i;r.data=i.initial};t.table.prototype={_init:function(){var i=n(this.container),t=this;return i.contents().remove(),t.data===null&&(t.data=[].repeat([].repeat(t.options.defaulttext,t.options.columns),t.options.rows)),t.data=u(t.data,t.options.defaulttext),t._generateTable(),i.addClass("dcContainer"),i.attr("tabindex",1),i.click(function(){t.deselectAll()}),i.find(".dcControlWrapper").click(function(n){n.stopPropagation()}),t},_isDisjoint:function(){var t=n(this.container),i=this;return t.find("tr.dcSubSelect").length>0},_registerInputEvents:function(t){var u=n(this.container),i=this,r=u.find(".dcTable");return t=n(t),t.click(function(n){n.stopPropagation()}),t.keydown(function(f){var e,o,s;f.stopPropagation();f.keyCode==27?(f.preventDefault(),u.focus()):f.keyCode==13&&f.ctrlKey?(f.preventDefault(),i._selectSingle(n(this).closest("tr")),i.insert(),i._focusInSelection()):f.keyCode==46&&f.ctrlKey?(f.preventDefault(),i.remove()):f.keyCode==38&&f.ctrlKey?(f.preventDefault(),t.closest("tr").is(".dcSelected,.dcSubSelect")||i._selectSingle(t.closest("tr")),i.moveUp(),t.focusEnd()):f.keyCode==40&&f.ctrlKey?(f.preventDefault(),t.closest("tr").is(".dcSelected,.dcSubSelect")||i._selectSingle(t.closest("tr")),i.moveDown(),t.focusEnd()):f.keyCode==38&&f.shiftKey?(f.preventDefault(),r.find(".dcSelected").length==0?(i._deselectSub(),i._selectSingle(r.find("tr:last-child"))):r.find(".dcSelected,.dcSubSelect").last().is(".dcSelected")?r.find(".dcSelected,.dcSubSelect").first().is(":first-child")||i._selectRange(r.find(".dcSelected,.dcSubSelect").first().prev()):i._selectRange(r.find(".dcSelected,.dcSubSelect").last().prev())):f.keyCode==40&&f.shiftKey?(f.preventDefault(),r.find(".dcSelected").length==0?(i._deselectSub(),i._selectSingle(r.find("tr:first-child"))):r.find(".dcSelected,.dcSubSelect").first().is(".dcSelected")?r.find(".dcSelected,.dcSubSelect").is(":last-child")||i._selectRange(r.find(".dcSelected,.dcSubSelect").last().next()):i._selectRange(r.find(".dcSelected,.dcSubSelect").first().next())):f.keyCode==38?(f.preventDefault(),e=t.closest("tr"),o=e.find('input[type="text"],textarea').index(t),e.is(":first-child")?r.find("tr:last-child").find('input[type="text"],textarea').eq(o).focusEnd():e.prev().find('input[type="text"],textarea').eq(o).focusEnd()):f.keyCode==40?(f.preventDefault(),e=t.closest("tr"),o=e.find('input[type="text"],textarea').index(t),e.is(":last-child")?r.find("tr:first-child").find('input[type="text"],textarea').eq(o).focusEnd():e.next().find('input[type="text"],textarea').eq(o).focusEnd()):(f.keyCode==84||f.keyCode==65)&&f.altKey?(f.preventDefault(),s=n(this).parent(),i._toggleInput(s),s.find('input[type="text"],textarea').first().focusEnd()):f.keyCode==83&&f.altKey?(f.preventDefault(),i._selectDisjoint(n(this).closest("tr"))):(f.keyCode==188||f.keyCode==37)&&f.ctrlKey?(f.preventDefault(),t.closest("td").is(":first-child")||t.closest("td").prev().find('input[type="text"],textarea').first().focusEnd()):(f.keyCode==190||f.keyCode==39)&&f.ctrlKey&&(f.preventDefault(),t.closest("td").is(":last-child")||t.closest("td").next().find('input[type="text"],textarea').first().focusEnd())}),t.focus(function(){u.addClass("dcFocus")}),t.blur(function(){u.removeClass("dcFocus")}),t.change(function(n){u.change(n);i._updateData()}),i},_registerRowEvents:function(t){var r=n(this.container),i=this;return t=n(t),t.click(function(t){t.stopPropagation();r.focus();t.shiftKey?i._selectRange(n(this)):t.ctrlKey?i._selectDisjoint(n(this)):i._selectSingle(n(this))}),i},_registerToggleEvents:function(t){var r=n(this.container),i=this;return t.click(function(n){n.stopPropagation();r.focus();i._toggleInput(this)}),i},_generateTable:function(){var f=n(this.container),t=this,c=n(document.createElement("div")).addClass("dcObjWrapper").appendTo(f),r=n(document.createElement("table")).addClass("dcTable").appendTo(c),s,o,e;for(i=0;i<t.data.length;i++){for(s=n(document.createElement("tr")).appendTo(r),j=0;j<t.data[0].length;j++){var l=n(document.createElement("td")).appendTo(s),h=n(document.createElement("div")).appendTo(l),a=n(document.createElement("div")).addClass("dcToggle").attr("title","Click here to toggle input box size.").appendTo(h);t._registerToggleEvents(a);t.data[i][j].toString().length<50?(o=n(document.createElement("input")).attr("type","text").appendTo(h),o.val(t.data[i][j]),o.attr("placeholder",t.options.placeholder),t._registerInputEvents(o)):(e=n(document.createElement("textarea")).appendTo(h),e.val(t.data[i][j]),e.attr("placeholder",t.options.placeholder),e.attr("rows",5),t._registerInputEvents(e))}t._registerRowEvents(s);f.unbind("keydown");f.keydown(function(n){n.keyCode==27?(n.preventDefault(),r.find(".dcSelected,.dcSubSelect").length>0?t.deselectAll():f.blur()):n.keyCode==78?(n.preventDefault(),t._isDisjoint()||t.insert()):n.keyCode==69?(n.preventDefault(),t._focusInSelection()):n.keyCode==9?(n.preventDefault(),t._focusInSelection()):(n.keyCode==84||n.keyCode==65)&&n.altKey?(n.preventDefault(),r.find(".dcSelected > td,.dcSubSelect > td").each(function(){t._toggleInput(this)})):n.keyCode==46?(n.preventDefault(),t.remove()):n.keyCode==38||n.keyCode==74?r.find(".dcSelected,.dcSubSelect").length>0?(n.preventDefault(),n.ctrlKey?t.moveUp():n.shiftKey?r.find(".dcSelected,.dcSubSelect").last().is(".dcSelected")?r.find(".dcSelected,.dcSubSelect").is(":first-child")||t._selectRange(r.find(".dcSelected,.dcSubSelect").first().prev()):t._selectRange(r.find(".dcSelected,.dcSubSelect").last().prev()):(t._deselectSub(),r.find(".dcSelected").is(":first-child")?t._selectSingle(r.find("tr:last-child")):t._selectSingle(r.find(".dcSelected").prev()))):(n.preventDefault(),t._selectSingle(r.find("tr:last-child"))):(n.keyCode==40||n.keyCode==75)&&(n.preventDefault(),r.find(".dcSelected,.dcSubSelect").length>0?n.ctrlKey?t.moveDown():n.shiftKey?r.find(".dcSelected,.dcSubSelect").first().is(".dcSelected")?r.find(".dcSelected,.dcSubSelect").is(":last-child")||t._selectRange(r.find(".dcSelected,.dcSubSelect").last().next()):t._selectRange(r.find(".dcSelected,.dcSubSelect").first().next()):(t._deselectSub(),r.find(".dcSelected").is(":last-child")?t._selectSingle(r.find("tr:first-child")):t._selectSingle(r.find(".dcSelected").next())):t._selectSingle(r.find("tr:first-child")));t._updateData()});t.options.draggable&&n.ui&&n.fn.sortable&&r.find("tbody").sortable({axis:"y",helper:function(i,u){var f,e;return u.children().each(function(){n(this).width(n(this).width())}),u.is(".dcSelected,.dcSubSelect")||t._selectSingle(u),f=r.find(".dcSelected,.dcSubSelect").clone(),u.data("multidrag",f).siblings(".dcSelected,.dcSubSelect").remove(),e=n("<tr />"),e.append(f)},stop:function(i,u){var e=u.item.data("multidrag");e.each(function(){t._registerRowEvents(n(this));t._registerInputEvents(n(this).find('input[type="text"],textarea'));t._registerToggleEvents(n(this).find(".dcToggle"))});u.item.after(e).remove();t._selectSingle(e.first());e.length>1&&t._selectRange(e.last());r.find("tr").hide().show(0);f.change();t._updateData()}})}var v=n(document.createElement("div")).addClass("dcControlWrapper").appendTo(c),y=n(document.createElement("div")).addClass("dcControlPanel").appendTo(v),u=n(document.createElement("ul")).appendTo(y),p=n(document.createElement("li")).text("Select All").click(function(n){n.stopPropagation();t.selectAll()}).appendTo(u),w=n(document.createElement("li")).text("Deselect All").click(function(n){n.stopPropagation();t.deselectAll()}).appendTo(u),b=n(document.createElement("li")).text("Move Up").addClass("dcMove dcDisabled").click(function(i){i.stopPropagation();n(this).hasClass("dcDisabled")||t.moveUp()}).appendTo(u),k=n(document.createElement("li")).text("Move Down").addClass("dcMove dcDisabled").click(function(i){i.stopPropagation();n(this).hasClass("dcDisabled")||t.moveDown()}).appendTo(u),d=n(document.createElement("li")).text("Insert").addClass("dcInsert").click(function(i){i.stopPropagation();n(this).hasClass("dcDisabled")||(t.insert(),t._focusInSelection())}).appendTo(u),g=n(document.createElement("li")).text("Remove").addClass("dcRemove dcDisabled").click(function(n){n.stopPropagation();t.remove()}).appendTo(u);return t},_updateData:function(){for(var u,t,o=n(this.container),f=this,i=o.find(".dcTable"),e=[],r=0;r<i.find("tr").length;r++){for(u=[],t=0;t<i.find("tr:first").find("td").length;t++)u.push(i.find("tr").eq(r).find("td").eq(t).find('input[type="text"],textarea').val());e.push(u)}return f.data=e,f},_enableInsert:function(){var t=n(this.container),i=this;return t.find(".dcInsert").removeClass("dcDisabled"),i},_disableInsert:function(){var t=n(this.container),i=this;return t.find(".dcInsert").addClass("dcDisabled"),i},_enableMove:function(){var t=n(this.container),i=this;return t.find(".dcMove").removeClass("dcDisabled"),i},_disableMove:function(){var t=n(this.container),i=this;return t.find(".dcMove").addClass("dcDisabled"),i},_enableRemove:function(){var t=n(this.container),i=this;return t.find(".dcRemove").removeClass("dcDisabled"),i},_disableRemove:function(){var t=n(this.container),i=this;return t.find(".dcRemove").addClass("dcDisabled"),i},_focusInSelection:function(t,i){var r=n(this.container),u=this;return r.find(".dcTable").find(".dcSelected,.dcSubSelect").length==0&&r.find(".dcTable").find("tr").first().find('input[type="text"],textarea').focusEnd(),t=t||0,i=i||0,r.find(".dcTable").find(".dcSelected,.dcSubSelect").eq(t).find('input[type="text"],textarea').eq(i).focusEnd(),u},_toggleInput:function(t){var u=n(this.container),f=this,e,i;if(t=n(t),t.prop("tagName")=="DIV"&&(t=t.closest("td")),e=u.height(),i=t.find('input[type="text"],textarea'),i.prop("tagName")=="INPUT"){var o=i.val(),s=i.attr("placeholder"),r=n(document.createElement("textarea")).insertAfter(i);r.val(o);r.attr("placeholder",s);r.attr("rows",5);i.remove();f._registerInputEvents(r)}else{var o=i.val(),s=i.attr("placeholder"),r=n(document.createElement("input")).attr("type","text").insertAfter(i);r.val(o);r.attr("placeholder",s);i.remove();f._registerInputEvents(r)}return u.height()!=e&&u.resize(),f},_selectSingle:function(t){var r=n(this.container),i=this;return i.deselectAll(),i._enableInsert(),i._enableMove(),i._enableRemove(),t=n(t),t.prop("tagName")=="TD"&&(t=t.parent()),t.addClass("dcSelected"),i},_selectRange:function(t){var f=n(this.container),i=this,e,u,r;if(i._enableInsert(),i._enableMove(),i._enableRemove(),t=n(t),t.prop("tagName")=="TD"&&(t=t.parent()),t.hasClass("dcSelected"))f.find(".dcTable").find(".dcSubSelect").length>0?i._deselectSub():i.deselectAll();else if(f.find(".dcTable").find(".dcSelected").length==0)i._selectSingle(t);else for(i._deselectSub(),t.addClass("dcSubSelect"),e=t.nextAll(".dcSelected").length==1,u=e?t.nextAll("tr"):t.prevAll("tr"),r=0;r<u.length;r++){if(u.eq(r).hasClass("dcSelected"))return;u.eq(r).addClass("dcSubSelect")}return i},_selectDisjoint:function(t){var r=n(this.container),i=this;return i._disableInsert(),i._enableMove(),i._enableRemove(),t=n(t),t.prop("tagName")=="TD"&&(t=t.parent()),r.find(".dcTable").find(".dcSelected,.dcSubSelect").length>0?t.is(".dcSelected,.dcSubSelect")?t.removeClass("dcSelected").removeClass("dcSubSelect"):t.addClass("dcSubSelect"):i._selectSingle(t),i},_deselect:function(){var i=n(this.container),t=this;return i.find(".dcTable").find("tr").removeClass("dcSelected"),i.find(".dcTable").find(".dcSelected,.dcSubSelect").length==0&&(t._disableMove(),t._disableRemove()),t},_deselectSub:function(){var i=n(this.container),t=this;return i.find(".dcTable").find("tr").removeClass("dcSubSelect"),i.find(".dcTable").find(".dcSelected,.dcSubSelect").length==0&&(t._disableMove(),t._disableRemove()),t},selectAll:function(){var i=n(this.container),t=this;return t._selectSingle(i.find(".dcTable").find("tr:first-child")),i.find(".dcTable").find("tr").length>1&&t._selectRange(i.find(".dcTable").find("tr:last-child")),t._enableInsert(),t},deselectAll:function(){var i=n(this.container),t=this;return t._deselect(),t._deselectSub(),t._enableInsert(),t},getData:function(){var i=n(this.container),t=this;return t.data},moveUp:function(){var i=n(this.container),r=this,t=i.find(".dcTable");return t.find(".dcSelected,.dcSubSelect").length>0&&!t.find(".dcSelected,.dcSubSelect").is(":first-child")&&(t.find(".dcSelected,.dcSubSelect").each(function(){n(this).insertBefore(n(this).prev())}),i.change()),r._updateData(),r},moveDown:function(){var i=n(this.container),r=this,t=i.find(".dcTable");return t.find(".dcSelected,.dcSubSelect").length>0&&!t.find(".dcSelected,.dcSubSelect").is(":last-child")&&(n(t.find(".dcSelected,.dcSubSelect").get().reverse()).each(function(){n(this).insertAfter(n(this).next())}),i.change()),r._updateData(),r},insert:function(){var u=n(this.container),t=this,o=u.height(),r=n(document.createElement("tr")),f,i;for(j=0;j<t.data[0].length;j++){var s=n(document.createElement("td")).appendTo(r),e=n(document.createElement("div")).appendTo(s),h=n(document.createElement("div")).addClass("dcToggle").attr("title","Click here to toggle input box size.").appendTo(e);t._registerToggleEvents(h);f=n(document.createElement("input")).attr("type","text").appendTo(e);f.val(t.options.defaulttext);f.attr("placeholder",t.options.placeholder);t._registerInputEvents(f)}return i=u.find(".dcTable"),i.find("tr").length==0?i.append(r):i.find(".dcSelected").length==1?i.find(".dcSubSelect").length>0?i.find(".dcSelected,.dcSubSelect").last().after(r):i.find(".dcSelected").after(r):i.find("tr:last-child").after(r),t._registerRowEvents(r),t._selectSingle(r),u.change(),u.height()!=o&&u.resize(),t._updateData(),t},remove:function(){var t=n(this.container),i=this,r=t.find(".dcTable"),u;return r.find(".dcSelected,.dcSubSelect").length>0&&confirm("Are you sure you wish to delete the selected rows?")&&(u=t.height(),r.find(".dcSelected,.dcSubSelect").remove(),r.find("tr").length==0?i.insert():(i._enableInsert(),i._disableMove(),i._disableRemove()),t.change(),t.height()!=u&&t.resize()),t.focus(),i._updateData(),i},reset:function(){var i=n(this.container),t=this;return t.destroy(),t._init(),t},destroy:function(){var t=n(this.container),i=this;return i.data=i.options.initial,t.removeClass("dcContainer").removeAttr("tabindex"),t.contents().remove(),t.removeData("dynamictable"),t.append(i.original),t[0]}};t.list=function(t,i){var r=this,u=n(t);r.container=u;r.original=u.contents().clone();r.options=i;r.data=i.initial};t.list.prototype={_init:function(){var i=n(this.container),t=this;return i.contents().remove(),t.data===null&&(t.data=[].repeat(t.options.defaulttext,t.options.rows)),t._generateList(),i.addClass("dcContainer"),i.attr("tabindex",1),i.click(function(){t.deselectAll()}),i.find(".dcControlWrapper").click(function(n){n.stopPropagation()}),t},_isDisjoint:function(){var t=n(this.container),i=this;return t.find("li.dcSubSelect").length>0},_registerInputEvents:function(t){var u=n(this.container),i=this,r=u.find(".dcList");return t=n(t),t.click(function(n){n.stopPropagation()}),t.keydown(function(f){var e,o;f.stopPropagation();f.keyCode==27?(f.preventDefault(),u.focus()):f.keyCode==13&&f.ctrlKey?(f.preventDefault(),i._selectSingle(n(this).closest("li")),i.insert(),i._focusInSelection()):f.keyCode==46&&f.ctrlKey?(f.preventDefault(),i.remove()):f.keyCode==38&&f.ctrlKey?(f.preventDefault(),t.closest("li").is(".dcSelected,.dcSubSelect")||i._selectSingle(t.closest("li")),i.moveUp(),t.focusEnd()):f.keyCode==40&&f.ctrlKey?(f.preventDefault(),t.closest("li").is(".dcSelected,.dcSubSelect")||i._selectSingle(t.closest("li")),i.moveDown(),t.focusEnd()):f.keyCode==38&&f.shiftKey?(f.preventDefault(),r.find(".dcSelected").length==0?i._selectSingle(r.find("li:last-child")):r.find(".dcSelected,.dcSubSelect").last().is(".dcSelected")?r.find(".dcSelected,.dcSubSelect").first().is(":first-child")||i._selectRange(r.find(".dcSelected,.dcSubSelect").first().prev()):i._selectRange(r.find(".dcSelected,.dcSubSelect").last().prev())):f.keyCode==40&&f.shiftKey?(f.preventDefault(),r.find(".dcSelected").length==0?i._selectSingle(r.find("li:first-child")):r.find(".dcSelected,.dcSubSelect").first().is(".dcSelected")?r.find(".dcSelected,.dcSubSelect").is(":last-child")||i._selectRange(r.find(".dcSelected,.dcSubSelect").last().next()):i._selectRange(r.find(".dcSelected,.dcSubSelect").first().next())):f.keyCode==38?(f.preventDefault(),e=t.closest("li"),e.is(":first-child")?r.find("li:last-child").find('input[type="text"],textarea').first().focusEnd():e.prev().find('input[type="text"],textarea').first().focusEnd()):f.keyCode==40?(f.preventDefault(),e=t.closest("li"),e.is(":last-child")?r.find("li:first-child").find('input[type="text"],textarea').first().focusEnd():e.next().find('input[type="text"],textarea').first().focusEnd()):(f.keyCode==84||f.keyCode==65)&&f.altKey?(f.preventDefault(),o=n(this).parent(),i._toggleInput(o),o.find('input[type="text"],textarea').first().focusEnd()):f.keyCode==83&&f.altKey&&(f.preventDefault(),i._selectDisjoint(n(this).closest("li")))}),t.focus(function(){u.addClass("dcFocus")}),t.blur(function(){u.removeClass("dcFocus")}),t.change(function(n){u.change(n);i._updateData()}),i},_registerRowEvents:function(t){var r=n(this.container),i=this;return t=n(t),t.click(function(t){t.stopPropagation();r.focus();t.shiftKey?i._selectRange(n(this)):t.ctrlKey?i._selectDisjoint(n(this)):i._selectSingle(n(this))}),i},_registerToggleEvents:function(t){var r=n(this.container),i=this;return t.click(function(n){n.stopPropagation();r.focus();i._toggleInput(this)}),i},_generateList:function(){var e=n(this.container),t=this,h=n(document.createElement("div")).addClass("dcObjWrapper").appendTo(e),r=n(document.createElement("ul")).addClass("dcList").appendTo(h),s,f;for(i=0;i<t.data.length;i++){var c=n(document.createElement("li")).appendTo(r),o=n(document.createElement("div")).appendTo(c),y=n(document.createElement("div")).addClass("dcBullet").text("•").appendTo(o),l=n(document.createElement("div")).addClass("dcToggle").attr("title","Click here to toggle input box size.").appendTo(o);t._registerToggleEvents(l);t.data[i].toString().length<50?(s=n(document.createElement("input")).attr("type","text").appendTo(o),s.val(t.data[i]),s.attr("placeholder",t.options.placeholder),t._registerInputEvents(s)):(f=n(document.createElement("textarea")).appendTo(o),f.val(t.data[i]),f.attr("placeholder",t.options.placeholder),f.attr("rows",5),t._registerInputEvents(f));t._registerRowEvents(c)}e.keydown(function(n){n.keyCode==27?(n.preventDefault(),r.find(".dcSelected,.dcSubSelect").length>0?t.deselectAll():e.blur()):n.keyCode==78?(n.preventDefault(),t._isDisjoint()||t.insert()):n.keyCode==69?(n.preventDefault(),t._focusInSelection()):(n.keyCode==84||n.keyCode==65)&&n.altKey?(n.preventDefault(),r.find(".dcSelected > div,.dcSubSelect > div").each(function(){t._toggleInput(this)})):n.keyCode==46?(n.preventDefault(),t.remove()):n.keyCode==38||n.keyCode==74?(n.preventDefault(),r.find(".dcSelected,.dcSubSelect").length>0?n.ctrlKey?t.moveUp():n.shiftKey?r.find(".dcSelected,.dcSubSelect").last().is(".dcSelected")?r.find(".dcSelected,.dcSubSelect").is(":first-child")||t._selectRange(r.find(".dcSelected,.dcSubSelect").first().prev()):t._selectRange(r.find(".dcSelected,.dcSubSelect").last().prev()):(t._deselectSub(),r.find(".dcSelected").is(":first-child")?t._selectSingle(r.find("li:last-child")):t._selectSingle(r.find(".dcSelected").prev())):t._selectSingle(r.find("li:last-child"))):(n.keyCode==40||n.keyCode==75)&&(n.preventDefault(),r.find(".dcSelected,.dcSubSelect").length>0?n.ctrlKey?t.moveDown():n.shiftKey?r.find(".dcSelected,.dcSubSelect").first().is(".dcSelected")?r.find(".dcSelected,.dcSubSelect").is(":last-child")||t._selectRange(r.find(".dcSelected,.dcSubSelect").last().next()):t._selectRange(r.find(".dcSelected,.dcSubSelect").first().next()):(t._deselectSub(),r.find(".dcSelected").is(":last-child")?t._selectSingle(r.find("li:first-child")):t._selectSingle(r.find(".dcSelected").next())):t._selectSingle(r.find("li:first-child")));t._updateData()});t.options.draggable&&n.ui&&n.fn.sortable&&r.sortable({axis:"y",helper:function(i,u){var f,e;return u.is(".dcSelected,.dcSubSelect")||t._selectSingle(u),f=r.find(".dcSelected,.dcSubSelect").clone(),u.data("multidrag",f).siblings(".dcSelected,.dcSubSelect").remove(),e=n("<li />"),e.append(f)},stop:function(i,r){var u=r.item.data("multidrag");u.each(function(){t._registerRowEvents(n(this));t._registerInputEvents(n(this).find('input[type="text"],textarea'));t._registerToggleEvents(n(this).find(".dcToggle"))});r.item.after(u).remove();t._selectSingle(u.first());u.length>1&&t._selectRange(u.last());e.change();t._updateData()}});var a=n(document.createElement("div")).addClass("dcControlWrapper").appendTo(h),v=n(document.createElement("div")).addClass("dcControlPanel").appendTo(a),u=n(document.createElement("ul")).appendTo(v),p=n(document.createElement("li")).text("Select All").click(function(n){n.stopPropagation();t.selectAll()}).appendTo(u),w=n(document.createElement("li")).text("Deselect All").click(function(n){n.stopPropagation();t.deselectAll()}).appendTo(u),b=n(document.createElement("li")).text("Move Up").addClass("dcMove dcDisabled").click(function(i){i.stopPropagation();n(this).hasClass("dcDisabled")||t.moveUp()}).appendTo(u),k=n(document.createElement("li")).text("Move Down").addClass("dcMove dcDisabled").click(function(i){i.stopPropagation();n(this).hasClass("dcDisabled")||t.moveDown()}).appendTo(u),d=n(document.createElement("li")).text("Insert").addClass("dcInsert").click(function(i){i.stopPropagation();n(this).hasClass("dcDisabled")||(t.insert(),t._focusInSelection())}).appendTo(u),g=n(document.createElement("li")).text("Remove").addClass("dcRemove dcDisabled").click(function(n){n.stopPropagation();t.remove()}).appendTo(u);return t},_updateData:function(){for(var f=n(this.container),i=this,r=f.find(".dcList"),u=[],t=0;t<r.find("li").length;t++)u.push(r.find("li").eq(t).find('input[type="text"],textarea').val());return i.data=u,i},_enableInsert:function(){var t=n(this.container),i=this;return t.find(".dcInsert").removeClass("dcDisabled"),i},_disableInsert:function(){var t=n(this.container),i=this;return t.find(".dcInsert").addClass("dcDisabled"),i},_enableMove:function(){var t=n(this.container),i=this;return t.find(".dcMove").removeClass("dcDisabled"),i},_disableMove:function(){var t=n(this.container),i=this;return t.find(".dcMove").addClass("dcDisabled"),i},_enableRemove:function(){var t=n(this.container),i=this;return t.find(".dcRemove").removeClass("dcDisabled"),i},_disableRemove:function(){var t=n(this.container),i=this;return t.find(".dcRemove").addClass("dcDisabled"),i},_focusInSelection:function(t){var i=n(this.container),r=this;return i.find(".dcList").find(".dcSelected,.dcSubSelect").length==0&&i.find(".dcList").find("li").first().find('input[type="text"],textarea').focusEnd(),t=t||0,i.find(".dcList").find(".dcSelected,.dcSubSelect").eq(t).find('input[type="text"],textarea').focusEnd(),r},_toggleInput:function(t){var u=n(this.container),f=this,e,i;if(t=n(t),t.prop("tagName")=="DIV"&&(t=t.closest("li")),e=u.height(),i=t.find('input[type="text"],textarea'),i.prop("tagName")=="INPUT"){var o=i.val(),s=i.attr("placeholder"),r=n(document.createElement("textarea")).insertAfter(i);r.val(o);r.attr("placeholder",s);r.attr("rows",5);i.remove();f._registerInputEvents(r)}else{var o=i.val(),s=i.attr("placeholder"),r=n(document.createElement("input")).attr("type","text").insertAfter(i);r.val(o);r.attr("placeholder",s);i.remove();f._registerInputEvents(r)}return u.height()!=e&&u.resize(),f},_selectSingle:function(t){var r=n(this.container),i=this;return i.deselectAll(),i._enableInsert(),i._enableMove(),i._enableRemove(),t=n(t),t.prop("tagName")=="DIV"&&(t=t.parent()),t.addClass("dcSelected"),i},_selectRange:function(t){var f=n(this.container),i=this,e,u,r;if(i._enableInsert(),i._enableMove(),i._enableRemove(),t=n(t),t.prop("tagName")=="DIV"&&(t=t.parent()),t.hasClass("dcSelected"))f.find(".dcList").find(".dcSubSelect").length>0?i._deselectSub():i.deselectAll();else if(f.find(".dcList").find(".dcSelected").length==0)i._selectSingle(t);else for(i._deselectSub(),t.addClass("dcSubSelect"),e=t.nextAll(".dcSelected").length==1,u=e?t.nextAll("li"):t.prevAll("li"),r=0;r<u.length;r++){if(u.eq(r).hasClass("dcSelected"))return;u.eq(r).addClass("dcSubSelect")}return i},_selectDisjoint:function(t){var r=n(this.container),i=this;return i._disableInsert(),i._enableMove(),i._enableRemove(),t=n(t),t.prop("tagName")=="DIV"&&(t=t.parent()),r.find(".dcList").find(".dcSelected,.dcSubSelect").length>0?t.is(".dcSelected,.dcSubSelect")?t.removeClass("dcSelected").removeClass("dcSubSelect"):t.addClass("dcSubSelect"):i._selectSingle(t),i},_deselect:function(){var i=n(this.container),t=this;return i.find(".dcList").find("li").removeClass("dcSelected"),i.find(".dcList").find(".dcSelected,.dcSubSelect").length==0&&(t._disableMove(),t._disableRemove()),t},_deselectSub:function(){var i=n(this.container),t=this;return i.find(".dcList").find("li").removeClass("dcSubSelect"),i.find(".dcList").find(".dcSelected,.dcSubSelect").length==0&&(t._disableMove(),t._disableRemove()),t},selectAll:function(){var i=n(this.container),t=this;return t._selectSingle(i.find(".dcList").find("li:first-child")),i.find(".dcList").find("li").length>1&&t._selectRange(i.find(".dcList").find("li:last-child")),t._enableInsert(),t},deselectAll:function(){var i=n(this.container),t=this;return t._deselect(),t._deselectSub(),t._enableInsert(),t},getData:function(){var i=n(this.container),t=this;return t.data},moveUp:function(){var i=n(this.container),r=this,t=i.find(".dcList");return t.find(".dcSelected,.dcSubSelect").length>0&&!t.find(".dcSelected,.dcSubSelect").is(":first-child")&&(t.find(".dcSelected,.dcSubSelect").each(function(){n(this).insertBefore(n(this).prev())}),i.change()),r._updateData(),r},moveDown:function(){var i=n(this.container),r=this,t=i.find(".dcList");return t.find(".dcSelected,.dcSubSelect").length>0&&!t.find(".dcSelected,.dcSubSelect").is(":last-child")&&(n(t.find(".dcSelected,.dcSubSelect").get().reverse()).each(function(){n(this).insertAfter(n(this).next())}),i.change()),r._updateData(),r},insert:function(){var u=n(this.container),t=this,o=u.height(),r=n(document.createElement("li")),e=n(document.createElement("div")).appendTo(r),h=n(document.createElement("div")).addClass("dcBullet").text("•").appendTo(e),s=n(document.createElement("div")).addClass("dcToggle").attr("title","Click here to toggle input box size.").appendTo(e),f,i;return t._registerToggleEvents(s),f=n(document.createElement("input")).attr("type","text").appendTo(e),f.val(t.options.defaulttext),f.attr("placeholder",t.options.placeholder),t._registerInputEvents(f),i=u.find(".dcList"),i.find("li").length==0?i.append(r):i.find(".dcSelected").length==1?i.find(".dcSubSelect").length>0?i.find(".dcSelected,.dcSubSelect").last().after(r):i.find(".dcSelected").after(r):i.find("li:last-child").after(r),t._registerRowEvents(r),t._selectSingle(r),u.change(),u.height()!=o&&u.resize(),t._updateData(),t},remove:function(){var t=n(this.container),i=this,r=t.find(".dcList"),u;return r.find(".dcSelected,.dcSubSelect").length>0&&confirm("Are you sure you wish to delete the selected rows?")&&(u=t.height(),r.find(".dcSelected,.dcSubSelect").remove(),r.find("li").length==0?i.insert():(i._enableInsert(),i._disableMove(),i._disableRemove()),t.change(),t.height()!=u&&t.resize()),t.focus(),i._updateData(),i},reset:function(){var i=n(this.container),t=this;return t.destroy(),t._init(),t},destroy:function(){var t=n(this.container),i=this;return i.data=i.options.initial,t.removeClass("dcContainer").removeAttr("tabindex"),t.contents().remove(),t.removeData("dynamiclist"),t.append(i.original),t[0]}};t.text=function(t,i){var r=this,u=n(t);r.container=u;r.original=u.contents().clone();r.options=i;r.data=i.initial};t.text.prototype={_init:function(){var i=n(this.container),t=this;return i.contents().remove(),t.data===null&&(t.data=t.options.defaulttext),t._generateText(),i.addClass("dcContainer"),i.attr("tabindex",1),t},_registerInputEvents:function(t){var i=n(this.container),r=this,u=i.find(".dcText");return t=n(t),t.click(function(n){n.stopPropagation()}),t.keydown(function(t){if(t.stopPropagation(),t.keyCode==27)t.preventDefault(),i.focus();else if((t.keyCode==84||t.keyCode==65)&&t.altKey){t.preventDefault();var u=n(this).parent();r._toggleInput(u);u.find('input[type="text"],textarea').first().focusEnd()}}),t.focus(function(){i.addClass("dcFocus")}),t.blur(function(){i.removeClass("dcFocus")}),t.change(function(n){i.change(n);r._updateData()}),r},_registerToggleEvents:function(t){var r=n(this.container),i=this;return t.click(function(n){n.stopPropagation();r.focus();i._toggleInput(this)}),i},_generateText:function(){var r=n(this.container),t=this,e=n(document.createElement("div")).addClass("dcObjWrapper").appendTo(r),o=n(document.createElement("div")).addClass("dcText").appendTo(e),f=n(document.createElement("div")).addClass("dcTextInnerWrapper").appendTo(o),s=n(document.createElement("div")).addClass("dcToggle").attr("title","Click here to toggle input box size.").appendTo(f),u,i;t._registerToggleEvents(s);t.data.toString().length<50?(u=n(document.createElement("input")).attr("type","text").appendTo(f),u.val(t.data),u.attr("placeholder",t.options.placeholder),t._registerInputEvents(u)):(i=n(document.createElement("textarea")).appendTo(f),i.val(t.data),i.attr("placeholder",t.options.placeholder),i.attr("rows",5),t._registerInputEvents(i));r.keydown(function(n){n.keyCode==27?(n.preventDefault(),r.blur()):n.keyCode==69?(n.preventDefault(),t._focusInput()):(n.keyCode==84||n.keyCode==65)&&n.altKey&&(n.preventDefault(),t._toggleInput(r.find(".dcText")));t._updateData()})},_updateData:function(){var i=n(this.container),t=this;return t.data=i.find(".dcText").find('input[type="text"],textarea').first().val(),t},_toggleInput:function(t){var u=n(this.container),f=this,e,i;if(t=n(t),t.hasClass("dcToggle")&&(t=t.parent()),e=u.height(),i=t.find('input[type="text"],textarea'),i.prop("tagName")=="INPUT"){var o=i.val(),s=i.attr("placeholder"),r=n(document.createElement("textarea")).insertAfter(i);r.val(o);r.attr("placeholder",s);r.attr("rows",5);i.remove();f._registerInputEvents(r)}else{var o=i.val(),s=i.attr("placeholder"),r=n(document.createElement("input")).attr("type","text").insertAfter(i);r.val(o);r.attr("placeholder",s);i.remove();f._registerInputEvents(r)}return u.height()!=e&&u.resize(),f},_focusInput:function(){var t=n(this.container),i=this;return t.find(".dcText").find('input[type="text"],textarea').focusEnd(),i},getData:function(){var i=n(this.container),t=this;return t.data},reset:function(){var i=n(this.container),t=this;return t.destroy(),t._init(),t},destroy:function(){var t=n(this.container),i=this;return i.data=i.options.initial,t.removeClass("dcContainer").removeAttr("tabindex"),t.contents().remove(),t.removeData("dynamictext"),t.append(i.original),t[0]}};n.fn.dynamicTable=function(){var f=n(this),u,o,e,i;if(arguments.length==0)return f;if(u=arguments[0],typeof u=="string"){if(i=f.data("dynamictable"),e=n.extend({},t.defaults,i),i||f.data("dynamictable",i=new t.table(f,e)),typeof i[u]!="function")throw"Unknown method: "+u;if(u.startsWith("_"))throw"Cannot access private method "+u+" from a public context.";return o=i[u].apply(i,Array.prototype.slice.call(arguments,1)),f.data("dynamictable",i),o}return r(u)?(e=n.extend({},t.defaults,{initial:u}),i=new t.table(f,e),i._init(),f.data("dynamictable",i)):typeof u=="object"&&(e=n.extend({},t.defaults,u),i=new t.table(f,e),i._init(),f.data("dynamictable",i)),f};n.fn.dynamicList=function(){var u=n(this),r,e,f,i;if(arguments.length==0)return u;if(r=arguments[0],typeof r=="string"){if(i=u.data("dynamiclist"),f=n.extend({},t.defaults,i),i||u.data("dynamiclist",i=new t.list(u,f)),typeof i[r]!="function")throw"Unknown method: "+r;if(r.startsWith("_"))throw"Cannot access private method "+r+" from a public context.";return e=i[r].apply(i,Array.prototype.slice.call(arguments,1)),u.data("dynamiclist",i),e}return n.isArray(r)?(f=n.extend({},t.defaults,{initial:r}),i=new t.list(u,f),i._init(),u.data("dynamiclist",i)):typeof r=="object"&&(f=n.extend({},t.defaults,r),i=new t.list(u,f),i._init(),u.data("dynamiclist",i)),u};n.fn.dynamicText=function(){var u=n(this),r,e,f,i;if(arguments.length==0)return u;if(r=arguments[0],typeof r=="string"){if(i=u.data("dynamictext"),f=n.extend({},t.defaults,i),i||u.data("dynamictext",i=new t.text(u,f)),typeof i[r]!="function")throw"Unknown method: "+r;if(r.startsWith("_"))throw"Cannot access private method "+r+" from a public context.";return e=i[r].apply(i,Array.prototype.slice.call(arguments,1)),u.data("dynamictext",i),e}return typeof r=="object"&&(f=n.extend({},t.defaults,r),i=new t.text(u,f),i._init(),u.data("dynamictext",i)),u}})(jQuery);
/*
//# sourceMappingURL=dynamiccontrols.min.js.map
*/